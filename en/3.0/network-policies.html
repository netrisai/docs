

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Netris Network Policies &amp; Protocol Configuration" name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic BGP &mdash; Netris Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/styles.css?v=a2b65874" />

  
    <link rel="shortcut icon" href="_static/netris_favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=016f71bc"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/version-picker.js?v=51bfea80"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="V-Net" href="vnet.html" />
    <link rel="prev" title="Switch Ports" href="switch-ports.html" /> 
<script type="text/javascript">
   $(document).ready(function () {
    $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
  });
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #ffffff" >


  <a href="https://www.netris.ai">



  
  <img src="_static/logo-600.png" class="logo" alt="Logo"/>

</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Generic Netris Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/installing-netris-controller.html">Installing a Netris Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/upgrading-netris.html">Netris Upgrade and Rollback Procedures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/upgrading-netris.html#upgrade-procedure">Upgrade Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials/upgrading-netris.html#rollback-procedure">Rollback Procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html#netris-vpc-for-equinix-metal-tutorials">Netris VPC for Equinix Metal Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/equinix-metal-api-integration-enablement.html">Equinix Metal API integration enablement</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/adding-netris-softgate-nodes-in-equinix-metal.html">Provisioning Netris SoftGate nodes in Equinix Metal Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/activating-bgp-on-equinix-metal-project.html">Activating BGP on Equinix Metal Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/enable-services-on-equinix-metal-project.html">Enabling services (NAT, V-Net, Load Balancer, IP pools)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/enable-services-on-equinix-metal-project.html#requesting-new-public-ip-address-block">1) Requesting new Public IP address block</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials/enable-services-on-equinix-metal-project.html#enable-on-demand-elastic-load-balancer">2) Enable on-demand (elastic) Load Balancer</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials/enable-services-on-equinix-metal-project.html#enable-v-net">3) Enable V-Net</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials/enable-services-on-equinix-metal-project.html#enable-nat">4) Enable NAT</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/using-vnet-in-equinix-metal-project.html">Using V-Net (isolated virtual network) services in Equinix Metal Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/using-l4-load-balancer.html">Using on-demand (elastic) L4 Load Balancer service</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud Native Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="kubernetes-integration.html">Kubernetes Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="kubernetes-integration.html#install-netris-operator">Install Netris Operator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#helm-chart-method">Helm Chart Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#regular-manifest-method">Regular Manifest Method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes-integration.html#using-type-loadbalancer">Using Type ‘LoadBalancer’</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes-integration.html#using-netris-custom-resources">Using Netris Custom Resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#introduction-to-netris-custom-resources">Introduction to Netris Custom Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#l4lb-custom-resource">L4LB Custom Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#v-net-custom-resource">V-Net Custom Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#bgp-custom-resource">BGP Custom Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#importing-existing-resources-from-netris-controller-to-kubernetes">Importing existing resources from Netris Controller to Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#reclaim-policy">Reclaim Policy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes-integration.html#calico-cni-integration">Calico CNI Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="kubernetes-integration.html#disabling-netris-calico-integration">Disabling Netris-Calico Integration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="terraform-integration.html">Terraform: Netris provider</a><ul>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#install-terraform">Install Terraform</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#create-a-directory-for-terraform-files">Create a directory for Terraform files</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#configure-a-provider">Configure a provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#prepare-an-infrastructure-plan">Prepare an infrastructure plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#create-resources">Create resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform-integration.html#delete-resources">Delete resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Netris Fundamentals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Netris</a></li>
<li class="toctree-l1"><a class="reference internal" href="netris-architecture.html">Netris Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="netris-architecture.html#netris-controller">Netris Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="netris-architecture.html#netris-switch-agent">Netris Switch Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="netris-architecture.html#netris-softgate">Netris SoftGate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="supported-networks.html">Reference Network Architectures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="supported-networks.html#unmanaged-switch-netris-softgate">Unmanaged Switch &amp; Netris SoftGate</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported-networks.html#unmanaged-switch-softgate-ha">Unmanaged Switch &amp; SoftGate (HA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported-networks.html#netris-managed-switch-softgate-ha">Netris Managed Switch &amp; SoftGate (HA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported-networks.html#netris-managed-switch-softgate-scalable-data-center-ha">Netris Managed Switch &amp; SoftGate scalable data center (HA)</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detailed Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Controller Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="controller-k3s-installation.html">Netris Controller installation on a generic Linux host</a><ul>
<li class="toctree-l3"><a class="reference internal" href="controller-k3s-installation.html#linux-host-requirements">Linux Host requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k3s-installation.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="controller-k3s-installation.html#installation-with-the-specific-host-name">Installation with the specific host name</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller-k3s-installation.html#installation-with-the-let-s-encrypt-ssl">Installation with the Let’s Encrypt SSL</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller-k3s-installation.html#installation-with-the-custom-ssl-issuer">Installation with the Custom SSL Issuer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="controller-k3s-installation.html#upgrading">Upgrading</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k3s-installation.html#uninstalling">Uninstalling</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k3s-installation.html#backup-and-restore">Backup and Restore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="controller-k3s-installation.html#backup">Backup</a></li>
<li class="toctree-l4"><a class="reference internal" href="controller-k3s-installation.html#restore">Restore</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="controller-k8s-installation.html">Helm Chart Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="controller-k8s-installation.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k8s-installation.html#get-repo-info">Get Repo Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k8s-installation.html#installing-the-chart">Installing the Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k8s-installation.html#uninstalling-the-chart">Uninstalling the Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="controller-k8s-installation.html#chart-configuration">Chart Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="switch-agent-installation.html">Switch Agent Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="switch-agent-installation.html#prerequisite-steps">Prerequisite Steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="switch-agent-installation.html#nvidia-cumulus-linux-devices">Nvidia Cumulus Linux Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="switch-agent-installation.html#configure-the-oob-management-ip-address">Configure the OOB Management IP address</a></li>
<li class="toctree-l4"><a class="reference internal" href="switch-agent-installation.html#configure-nvidia-cumulus-linux-license">Configure Nvidia Cumulus Linux License</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="switch-agent-installation.html#ubuntu-switchdev-devices">Ubuntu SwitchDev Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="switch-agent-installation.html#id2">Configure the OOB Management IP address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="switch-agent-installation.html#edgecore-sonic-devices">EdgeCore SONiC Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="switch-agent-installation.html#id3">Configure the OOB Management IP address</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="switch-agent-installation.html#install-the-netris-agent">Install the Netris Agent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SoftGate-installation.html">SoftGate Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SoftGate-installation.html#minimum-hardware-requirements">Minimum Hardware Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftGate-installation.html#install-the-netris-agent">Install the Netris Agent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SoftGate-PRO-installation.html">SoftGate PRO Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SoftGate-PRO-installation.html#minimum-hardware-requirements">Minimum Hardware Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftGate-PRO-installation.html#bios-configuration">BIOS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftGate-PRO-installation.html#install-the-netris-agent">Install the Netris Agent</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Switch-fabric Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipam.html">IP Address Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ipam.html#allocations-and-subnets">Allocations and Subnets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipam.html#add-an-allocation">Add an Allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipam.html#add-a-subnet">Add a Subnet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topology-management.html">Inventory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#inventory-profiles">Inventory Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#adding-switches">Adding Switches</a></li>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#adding-softgates">Adding SoftGates</a></li>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#viewing-inventory">Viewing Inventory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topology-management.html#topology-manager">Topology Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#adding-links">Adding Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="topology-management.html#hairpin-links-nvidia-cumulus-only">Hairpin Links (Nvidia Cumulus only)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="switch-ports.html">Switch Ports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Policies</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic BGP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-bgp-peers">Adding BGP Peers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#advanced-bgp">Advanced BGP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bgp-objects">BGP Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ipv4-prefix">IPv4 Prefix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ipv6-prefix">IPv6 Prefix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#community">Community</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bgp-route-maps">BGP route-maps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#static-routing">Static Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#nat">NAT</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#enabling-nat">Enabling NAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-nat-rules">Defining NAT rules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#sitemesh">SiteMesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="#looking-glass">Looking Glass</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vnet.html">V-Net</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vnet.html#v-net-fields">V-Net Fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="l3-load-balancer.html">L3 Load Balancer (Anycast LB)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="l3-load-balancer.html#creating-an-l3-load-balancer">Creating an L3 Load Balancer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="l4-load-balancer.html">L4 Load Balancer (L4LB)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="l4-load-balancer.html#enabling-l4lb-service">Enabling L4LB service</a></li>
<li class="toctree-l2"><a class="reference internal" href="l4-load-balancer.html#consuming-l4lb-service">Consuming L4LB service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="acls.html">Access Control Lists (ACL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="acls.html#acl-default-policy">ACL Default Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="acls.html#acl-rules">ACL Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="acls.html#acl-approval-workflow">ACL Approval Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="acls.html#acl-processing-order">ACL Processing Order</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roh.html">ROH (Routing on the Host)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="roh.html#adding-roh-hosts">Adding ROH Hosts</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Operations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="visibility.html">Visibility (Telescope)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="visibility.html#graph-boards">Graph Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="visibility.html#api-logs">API Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="visibility.html#dashboard">Dashboard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accounts.html">Accounts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="accounts.html#users">Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="accounts.html#tenants">Tenants</a></li>
<li class="toctree-l2"><a class="reference internal" href="accounts.html#permission-groups">Permission Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="accounts.html#user-roles">User Roles</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Updates</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="softgate-performance.html">SoftGate Performance</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #ffffff" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Netris docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!--
<div class="header-wrapper">
    <div>
        <a class="underscore-transition" href="https://www.netris.ai/overview/">
            Product Overview
        </a>
        <a class="underscore-transition" href="https://www.netris.ai/start/">
            Get started
        </a>
        <a class="underscore-transition" href="https://www.netris.ai/category/blog/">
            Blog
        </a>
    </div>
    <a class="button" href="https://netris.ai/demo">
        Schedule a demo
    </a>
</div>
--><div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Basic BGP</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/netrisai/docs/blob/master/network-policies.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="switch-ports.html" class="btn btn-neutral float-left" title="Switch Ports" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vnet.html" class="btn btn-neutral float-right" title="V-Net" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-bgp">
<span id="bgp-def"></span><h1>Basic BGP<a class="headerlink" href="#basic-bgp" title="Link to this heading"></a></h1>
<p>BGP neighbors can be declared in the Net→E-BGP section. Netris will automatically generate and program the network configuration to meet the requirements.</p>
<section id="adding-bgp-peers">
<h2>Adding BGP Peers<a class="headerlink" href="#adding-bgp-peers" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Navigate to Net→E-BGP in the web UI</p></li>
<li><p>Click the <strong>Add</strong> button</p></li>
<li><p>Fill in the fields as described in the table below</p></li>
<li><p>Click the <strong>Add</strong> button</p></li>
</ol>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">BGP Peer Fields</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Name</strong></p></td>
<td><p>User assigned name of BGP session</p></td>
</tr>
<tr class="row-even"><td><p><strong>Description</strong></p></td>
<td><p>Free description</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Site</strong></p></td>
<td><p>Selects the site (data center) where this BGP session should be terminated on.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Softgate</strong></p></td>
<td><p>Only if SoftGate nodes are in use. Define on which node BGP session should be terminated on.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Neighbor</strong> AS</p></td>
<td><p>Autonomous System number of the remote side. (Local AS is defined at Net→Sites section)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Terminate on switch</strong></p></td>
<td><p>Typically used for setups without SoftGate. For connecting with upstream routers. Instructs the system to terminate the BGP session directly on the switch.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Switch port</strong></p></td>
<td><p>Switch Port for the physical cable to the BGP neighbor (any port on the fabric). Optionally can bind to a V-NET service. Typically used for peering with IXPs or systems like GGC (Google Global Cache).</p></td>
</tr>
<tr class="row-even"><td><p><strong>VLAN ID</strong></p></td>
<td><p>Optionally tag with a VLAN ID (usually untagged)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>IP Version</strong></p></td>
<td><p>IPv4 or IPv6</p></td>
</tr>
<tr class="row-even"><td><p><strong>Local IP</strong></p></td>
<td><p>BGP peering IP address on Netris controlled side</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Remote IP</strong></p></td>
<td><p>BGP peering IP address on the remote end</p></td>
</tr>
<tr class="row-even"><td><p><strong>State</strong></p></td>
<td><p>Administrative state (Enabled/Disabled)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Advanced</strong></p></td>
<td><p>Advanced policy settings are described in the next section</p></td>
</tr>
</tbody>
</table>
<p>Example: Declare a basic BGP neighbor</p>
<img alt="_images/add-bgp-basic.png" class="with-shadow align-center" src="_images/add-bgp-basic.png" />
<p>Example2: Declare BGP neighbor terminated on V-Net. Netris will automatically configure BGP session on the switch closest to the remote IP.
.. image:: images/add-bgp-basic-2.png</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">align<span class="colon">:</span></dt>
<dd class="field-odd"><p>center</p>
</dd>
<dt class="field-even">class<span class="colon">:</span></dt>
<dd class="field-even"><p>with-shadow</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>
<section id="advanced-bgp">
<h1>Advanced BGP<a class="headerlink" href="#advanced-bgp" title="Link to this heading"></a></h1>
<p>BGP neighbor declaration can optionally include advanced BGP attributes and BGP route-maps for fine-tuning of BGP policies.</p>
<p>Click Advanced to expand the BGP neighbor add/edit window.</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">BGP Peer Fields - Advanced</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Neighbor address</strong></p></td>
<td><p>IP address of the neighbor when peering with the loopback IP address instead of the interface IP address (aka Multihop).</p></td>
</tr>
<tr class="row-even"><td><p><strong>Update source</strong></p></td>
<td><p>When Multihop BGP peering is used it allows the operator to choose one of the loopback IP addresses of the SoftGate node as a BGP speaker source IP address.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>BGP password</strong></p></td>
<td><p>Password for the BGP session</p></td>
</tr>
<tr class="row-even"><td><p><strong>Allowas-in</strong></p></td>
<td><p>Define the number of allowed occurrences of the self AS number in the received BGP NLRI to consider it valid (normally 0).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Default Originate</strong></p></td>
<td><p>Originate default route to the current neighbor</p></td>
</tr>
<tr class="row-even"><td><p><strong>Prefix Inbound Max</strong></p></td>
<td><p>Drop the BGP session if the number of received prefixes exceeds this max limit. For switch termination maximum allowed is 1000 prefixes and SoftGate termination can handle up to one million prefixes.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Inbound Route-Map</strong></p></td>
<td><p>Apply BGP policies described in a route-map for inbound BGP updates</p></td>
</tr>
<tr class="row-even"><td><p><strong>Outbound Route-Map</strong></p></td>
<td><p>Apply BGP policies described in a route-map for outbound BGP updates</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Local Preference</strong></p></td>
<td><p>Set local preference for all inbound routes for the current neighbor</p></td>
</tr>
<tr class="row-even"><td><p><strong>Weight</strong></p></td>
<td><p>Set weight for all inbound routes for the current neighbor</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Prepend Inbound (times)</strong></p></td>
<td><p>How many times to prepend self AS number for inbound routes</p></td>
</tr>
<tr class="row-even"><td><p><strong>Prepend Outbound (times)</strong></p></td>
<td><p>How many times to prepend self AS number for outbound routes</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Prefix List Inbound</strong></p></td>
<td><p>List of IP addresses prefixes to permit or deny inbound</p></td>
</tr>
<tr class="row-even"><td><p><strong>Prefix List Outbound</strong></p></td>
<td><p>List of IP addresses prefixes to permit or deny outbound</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Send BGP Community</strong></p></td>
<td><p>List of BGP communities to send to the current neighbor</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<section id="bgp-objects">
<h2>BGP Objects<a class="headerlink" href="#bgp-objects" title="Link to this heading"></a></h2>
<div class="line-block">
<div class="line">Under Net→E-BGP objects, you can define various BGP objects referenced from a route-map to declare a dynamic BGP policy.</div>
<div class="line">Supported objects include:</div>
</div>
<ul class="simple">
<li><p>IPv4 Prefix</p></li>
<li><p>IPv6 Prefix</p></li>
<li><p>AS-PATH</p></li>
<li><p>Community</p></li>
<li><p>Extended Community</p></li>
<li><p>Large Community</p></li>
</ul>
<section id="ipv4-prefix">
<h3>IPv4 Prefix<a class="headerlink" href="#ipv4-prefix" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">Rules defined one per line.</div>
<div class="line">Each line in IPv4 prefix list field consists of three parts:</div>
</div>
<ul class="simple">
<li><p>Action - Possible values are: permit or deny (mandatory).</p></li>
<li><p>IP Prefix - Any valid IPv4 prefix (mandatory).</p></li>
<li><p>Length - Possible values are: le &lt;len&gt;, ge &lt;len&gt; or ge &lt;len&gt; le &lt;len&gt;.</p></li>
</ul>
<p>Example: Creating an IPv4 Prefix list.</p>
<img alt="_images/IPv4-Prefix.png" class="with-shadow align-center" src="_images/IPv4-Prefix.png" />
</section>
<section id="ipv6-prefix">
<h3>IPv6 Prefix<a class="headerlink" href="#ipv6-prefix" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">Rules defined one per line.</div>
<div class="line">Each line in IPv6 prefix list field consists of three parts:</div>
</div>
<ul class="simple">
<li><p>Action - Possible values are: permit or deny (mandatory).</p></li>
<li><p>IP Prefix - Any valid IPv6 prefix (mandatory).</p></li>
<li><p>Keyword - Possible values are: le &lt;len&gt;, ge &lt;len&gt; or ge &lt;len&gt; le &lt;len&gt;.</p></li>
</ul>
<p>Example: Creating an IPv6 Prefix list.</p>
<img alt="_images/IPv6-Prefix.png" class="with-shadow align-center" src="_images/IPv6-Prefix.png" />
</section>
<section id="community">
<h3>Community<a class="headerlink" href="#community" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">Community field has two parts:</div>
</div>
<ul class="simple">
<li><p>Action - Possible values: permit or deny (mandatory).</p></li>
<li><p>Community string - format is AA:NN, where AA and NN are any number from 0 to 65535 range or alternatively well known string (local-AS|no-advertise|no-export|internet|additive).</p></li>
</ul>
<p>Example: Creating community.</p>
<img alt="_images/community.png" class="with-shadow align-center" src="_images/community.png" />
</section>
</section>
<hr class="docutils" />
<section id="bgp-route-maps">
<h2>BGP route-maps<a class="headerlink" href="#bgp-route-maps" title="Link to this heading"></a></h2>
<div class="line-block">
<div class="line">Under the Net→E-BGP Route-maps section, you can define route-map policies, which can be associated with the BGP neighbors inbound or outbound.</div>
<div class="line">Description of route-map fields:</div>
</div>
<ul class="simple">
<li><p><strong>Sequence Number</strong> - Automatically assigned a sequence number. Drag and move sequences to organize the order.</p></li>
<li><p><strong>Description</strong> - Free description.</p></li>
<li><p><strong>Policy</strong> - Permit or deny the routes which match below all match clauses within the current sequence.</p></li>
<li><p><strong>Match</strong> - Rules for route matching.</p>
<ul>
<li><p><strong>Type</strong> - Type of the object to match: AS-Path, Community, Extended Community, Large Community, IPv4 prefix-list, IPv4 next-hop, Route Source, IPv6 prefix-list. IPv6 next-hop, local-preference, MED, Origin, Route Tag.</p></li>
<li><p><strong>Object</strong> - Select an object from the list.</p></li>
</ul>
</li>
<li><p><strong>Action</strong> - Action when all match clauses are met.</p>
<ul>
<li><p><strong>Action type</strong> - Define whether to manipulate a particular BGP attribute or go to another sequence.</p></li>
<li><p><strong>Attribute</strong> - The attribute to be manipulated.</p></li>
<li><p><strong>Value</strong> - New attribute value.</p></li>
</ul>
</li>
</ul>
<p>Example: route-map</p>
<img alt="_images/route-map.png" class="with-shadow align-center" src="_images/route-map.png" />
</section>
</section>
<hr class="docutils" />
<section id="static-routing">
<h1>Static Routing<a class="headerlink" href="#static-routing" title="Link to this heading"></a></h1>
<p>Located under Net→Routes is a method for describing static routing policies that Netris will dynamically inject on switches and/or SoftGate where appropriate.
We recommend using the Routes only if BGP is not supported by the remote end.</p>
<div class="line-block">
<div class="line">Typical use cases for static routing:</div>
</div>
<ul class="simple">
<li><p>To connect the switch fabric to an ISP or upstream router in a situation where BGP and dual-homing are not supported.</p></li>
<li><p>Temporary interconnection with the old network for a migration.</p></li>
<li><p>Routing a subnet behind a VM hypervisor machine for an internal VM network.</p></li>
<li><p>Specifically routing traffic destined to a particular prefix through an out-of-band management network.</p></li>
</ul>
<div class="line-block">
<div class="line">Add new static route fields description:</div>
</div>
<ul class="simple">
<li><p><strong>Prefix</strong> - Route destination to match.</p></li>
<li><p><strong>Next-Hop</strong> - Traffic destined to the Prefix will be routed towards the Next-Hop. Note that static routes will be injected only on units that have the Next-Hop as a connected network.</p></li>
<li><p><strong>Description</strong> - Free description.</p></li>
<li><p><strong>Site</strong> - Site where Route belongs.</p></li>
<li><p><strong>State</strong> - Administrative (enable/disable) state of the Route.</p></li>
<li><p><strong>Apply to</strong> -  Limit the scope to particular units. It’s typically used for Null routes.</p></li>
</ul>
<p>Example: Default route pointing to a Next-Hop that belongs to one of V-NETs.</p>
<img alt="_images/defaultroute.png" class="with-shadow align-center" src="_images/defaultroute.png" />
<p>Example: Adding a back route to 10.254.0.0/16 through an out-of-band management network.</p>
<img alt="_images/static_route.png" class="with-shadow align-center" src="_images/static_route.png" />
<p>Screenshot: This Shows that my back route is actually applied on leaf1 and spine1.</p>
<img alt="_images/leaf1_spine1.png" class="with-shadow align-center" src="_images/leaf1_spine1.png" />
<hr class="docutils" />
</section>
<section id="nat">
<span id="nat-def"></span><h1>NAT<a class="headerlink" href="#nat" title="Link to this heading"></a></h1>
<p>Netris SoftGate nodes are required to support NAT (Network Address Translation).</p>
<section id="enabling-nat">
<h2>Enabling NAT<a class="headerlink" href="#enabling-nat" title="Link to this heading"></a></h2>
<p>To enable NAT for a given site, you first need to create a subnet with NAT purpose in the IPAM section. NAT IP addresses can be used for SNAT or DNAT as a global IP address (the public IP visible on the Internet). NAT IP pools are IP address ranges that SNAT can use as a rolling global IP (for a larger scale, similar to carrier-grade SNAT). SNAT is always overloading the ports, so many local hosts can share one or just a few public IP addresses. You can add as many NAT IP addresses and NAT pools as you need.</p>
<ol class="arabic simple">
<li><p>Allocate a public IP subnet for NAT under Net→IPAM.</p></li>
</ol>
<p>Example: Adding an IP allocation under Net→Subnets.</p>
<img alt="_images/IP-allocation.png" class="with-shadow align-center" src="_images/IP-allocation.png" />
<ol class="arabic simple">
<li><p>Attach NAT IP addresses and/or NAT IP Pools to just one SoftGate node. Other SoftGate Nodes on the same site will automatically add the same NAT IP/Pool resources for proper consistency and high availability.</p></li>
</ol>
<p>Example: Adding NAT IP addresses and NAT IP Address Pools to a SoftGate node.</p>
<img alt="_images/NATIP-address.png" class="with-shadow align-center" src="_images/NATIP-address.png" />
</section>
<section id="defining-nat-rules">
<h2>Defining NAT rules<a class="headerlink" href="#defining-nat-rules" title="Link to this heading"></a></h2>
<p>NAT rules are defined under Net→NAT.</p>
<p>Example: SNAT all hosts on 10.0.0.0/8 to the Internet using 198.51.100.65 as a global IP.</p>
<img alt="_images/globalIP.png" class="with-shadow align-center" src="_images/globalIP.png" />
<p>Example: Port forwarding. DNAT the traffic destined to 198.51.100.66:80 to be forwarded to the host 10.0.4.10 on port tcp/1080.</p>
<img alt="_images/Port-Forwarding.png" class="with-shadow align-center" src="_images/Port-Forwarding.png" />
</section>
</section>
<hr class="docutils" />
<section id="sitemesh">
<h1>SiteMesh<a class="headerlink" href="#sitemesh" title="Link to this heading"></a></h1>
<p>SiteMesh is a Netris service for site-to-site interconnects over the public Internet. SiteMesh automatically generates configuration for WireGuard to create encrypted tunnels between participating sites and automatically generates a configuration for FRR to run dynamic routing. Hence, sites learn how to reach each other over the mesh WireGuard tunnels. The SiteMesh feature requires a SoftGate node at each participating site.</p>
<p>Edit Net-&gt;Sites, do declare what sites should form a SiteMesh. See SiteMesh types described below.</p>
<ul class="simple">
<li><p><strong>Disabled</strong> - Do not participate in SiteMesh.</p></li>
<li><p><strong>Hub</strong> - Hub sites form full-mesh tunnels with all other sites (Hub and non-Hub) and can carry transit traffic for non-Hub sites. (usually major data center sites)</p></li>
<li><p><strong>Spoke</strong> - Spoke sites form tunnels with all Hub sites. Spoke to Spoke traffic will transit a Hub site. (small data center sites or major office sites)</p></li>
<li><p><strong>Dynamic Spoke</strong> - Dynamic Spoke is like Spoke, but it will maintain a tunnel only with one Hub site, based on dynamic connectivity measurements underneath and mathematical modeling. (small office sites)</p></li>
</ul>
<p>Screenshot: Site Mesh parameter editing a Site under Net→Sites.</p>
<img alt="_images/Site_Mesh.png" class="align-center" src="_images/Site_Mesh.png" />
<p>You only need to define your site-to-site VPN architecture policy by selecting SiteMesh mode for every site. Netris will generate the WireGuard tunnels (using randomly generated keys, and generate FRR rules to get the dynamic routing to converge.</p>
<img alt="_images/SiteMesh_modes.png" class="align-center" src="_images/SiteMesh_modes.png" />
<p>Check the Net→Site Mesh section for the listing of tunnel statuses.</p>
<p>Screenshot: Listing of SiteMesh tunnels and BGP statuses (Net→Site Mesh)</p>
<img alt="_images/SiteMesh_listing.png" class="align-center" src="_images/SiteMesh_listing.png" />
</section>
<hr class="docutils" />
<section id="looking-glass">
<h1>Looking Glass<a class="headerlink" href="#looking-glass" title="Link to this heading"></a></h1>
<p>The Looking Glass Is a GUI-based tool for looking up routing information from a switch or SoftGate perspective. You can access the Looking Glass either from Topology, individually for every device (right click on device → details → Looking Glass), or by navigating to Net→Looking Glass then selecting the device from the top-left dropdown menu.</p>
<p>Looking Glass controls described for IPv4/IPv6 protocol families.</p>
<ul class="simple">
<li><p><strong>BGP Summary</strong> - Shows the summary of BGP adjacencies with neighbors, interface names, prefixes received. You can click on the neighbor name then query for the list of advertised/received prefixes.</p></li>
<li><p><strong>BGP Route</strong> - Lookup the BGP table (RIB) for the given address.</p></li>
<li><p><strong>Route</strong> - Lookup switch routing table for the given address.</p></li>
<li><p><strong>Traceroute</strong> - Conduct a traceroute from the selected device towards the given destination, optionally allowing to determine the source IP address.</p></li>
<li><p><strong>Ping</strong> - Execute a ping on the selected device towards the given destination, optionally allowing to select the source IP address.</p></li>
</ul>
<p>Example: Spine1: listing BGP neighbors and number of received prefixes.</p>
<img alt="_images/Spine1.png" class="with-shadow align-center" src="_images/Spine1.png" />
<p>Example: BGP Route - looking up my leaf1 switch’s loopback address from spine1’s perspective. Spine1 is load balancing between two available paths.</p>
<img alt="_images/BGP_route.png" class="with-shadow align-center" src="_images/BGP_route.png" />
<p>Example: Ping.</p>
<img alt="_images/ping.png" class="with-shadow align-center" src="_images/ping.png" />
<div class="line-block">
<div class="line">Looking Glass controls described for the EVPN family.</div>
</div>
<ul class="simple">
<li><p><strong>BGP Summary</strong> - Show brief summary of BGP adjacencies with neighbors, interface names, and EVPN prefixes received.</p></li>
<li><p><strong>VNI</strong> - List VNIs learned.</p></li>
<li><p><strong>BGP EVPN</strong> - List detailed EVPN routing information optionally for the given route distinguisher.</p></li>
<li><p><strong>MAC table</strong> - List MAC address table for the given VNI.</p></li>
</ul>
<p>Example: Listing of adjacent BGP neighbors and number of EVPN prefixes received.</p>
<img alt="_images/BGP_neighbors_listing.png" class="with-shadow align-center" src="_images/BGP_neighbors_listing.png" />
<p>Example: Listing MAC addresses on VNI 2.</p>
<img alt="_images/MAC_listing.png" class="with-shadow align-center" src="_images/MAC_listing.png" />
<p>Example: EVPN routing information listing for a specified route distinguisher.</p>
<img alt="_images/EVPN_routing.png" class="with-shadow align-center" src="_images/EVPN_routing.png" />
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="switch-ports.html" class="btn btn-neutral float-left" title="Switch Ports" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vnet.html" class="btn btn-neutral float-right" title="V-Net" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Netris.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Alternate Versions</span>
      v: 3.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      
      
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/docs/manifests/en/3.0/netris-docs_en_3.0.pdf">pdf</a></dd>
        
          <dd><a href="/docs/manifests/en/3.0/netris-docs_en_3.0.epub">epub</a></dd>
        
      </dl>
      
      
      <hr/>
      Free theme by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>

<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-152905529-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-152905529-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>